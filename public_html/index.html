<!DOCTYPE html>
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript" src="js/libs/raphael/raphael-min.js">
        </script>
    </head>
    <body>
        <div>Україна (svg, raphael.js, readysetraphael, jquery (неявно))</div>
        <div id="rsr" style="width: 600px"></div>
        <script type="text/javascript" src="js/ukrmap.js"> </script>
        <script type="text/javascript">
            //need for autoresizing and rescaling. 100% responsive!
            var svg = document.querySelector("svg");
            svg.removeAttribute("width");
            svg.removeAttribute("height");
            //http://stackoverflow.com/questions/11176396/how-can-i-scale-raphael-js-elements-on-window-resize-using-jquery
            var startOblastCode = 3098;
            var endOblastCode = 3146;
            var startCircleCode = 3151;
            var endCircleCode = 3201;
            var nameStep=2;
  //this structure is so bydlocode TT___TT
  clickedRegion=null;
  var semanticOblastCodes2 = [
  {'path3098':['Одеська']}, 
  {'path3100':['Миколаївська']}, 
  {'path3102':['Херсонська']}, 
  {'path3104':['Волинська']}, 
  {'path3106':['Рівненська']}, 
  {'path3108':['Львівська']}, 
  {'path3110':['Закарпатська']}, 
  {'path3112':['Тернопільська']}, 
  {'path3114':['Хмельницька']}, 
  {'path3116':['Житомирська']}, 
  {'path3118':['Чернівецька']}, 
  {'path3120':['Вінницька']}, 
  {'path3122':['Київська']}, 
  {'path3124':['Чернігівська']}, 
  {'path3126':['Сумська']}, 
  {'path3128':['Черкаська']},
  {'path3130':['Полтавська']}, 
  {'path3132':['Кіровоградська']}, 
  {'path3134':['Дніпропетровська']}, 
  {'path3136':['Івано-Франківська']}, 
  {'path3138':['Запорізька']},
  {'path3140':['Харківська']}, 
  {'path3142':['Луганська']}, 
  {'path3144':['Донецька']}, 
  {'path3146':['АР Крим']},
  ];
            //rsr.transform("s2");
            //getting variables by their names. ReadySetRaphael returned mapdata in unstructured form, each region is a separate path.
            //all variables in ukrmap.js are global (we may use http://stackoverflow.com/questions/724857/how-to-find-javascript-variable-by-its-name)
            //cycle through regions
            for (var i=startOblastCode; i<=endOblastCode; i+=nameStep) {
                var currCode="path"+i;
                //console.log(currCode);
                //window[currCode].transform("s2"); //not necessary, we are scaling this dynamically

                var el = window[currCode];
                el.attr({'stroke-width':'0.6'});
                el.mouseover(function() {
                    if (clickedRegion===this.attr('id')) {
                        return;
                    }
                    this.toFront();
                    this.attr({
                        cursor: 'pointer',
                        fill: '#ff0000',
                        stroke: '#fff',
                        'stroke-width': '1'
                    });
                    this.animate({
                        scale: '1.2'
                    }, 200);
                });
            el.mouseout(function() {
                if (clickedRegion===this.attr('id'))
                this.animate({
                    scale: '1.05'
                }, 200);
                this.attr({
                    fill: '#3c7bae',
                    stroke: '#326994',
                    'stroke-width':'0.6'
                });
                this.toBack();
            });
            el.click(function() {
                if (clickedRegion!==null){
                    window[clickedRegion].attr({
                        fill: '#3c7bae',
                        stroke: '#326994',
                        'stroke-width':'0.6'
                    });
                }
                this.animate({ fill: 'green' }, 200);
                clickedRegion=this.attr('id');
                
                console.log(clickedRegion,":",typeof clickedRegion,";",this.attr());
            });

            }
            for (var j=startCircleCode; j<=endCircleCode; j+=nameStep) {
                var currCode2="circle"+j;
                //console.log(currCode2);
                
            }
            
        </script>
    </body>
</html>
